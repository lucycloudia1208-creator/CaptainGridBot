# EdgeX Grid Bot 環境変数設定（2026年1月版 - 本番環境）

# ==============================
# EdgeX API認証情報（必須）
# ==============================
EDGEX_BASE_URL=https://pro.edgex.exchange
EDGEX_ACCOUNT_ID=678726936008066030
EDGEX_STARK_PRIVATE_KEY=036ec854923b792e2335614386dc67114e5800a7bb3d3257a751a9a50503d00d # ⚠️ 本番キーに変更してください

# ==============================
# 取引設定
# ==============================
SYMBOL=BTC-USDT
CONTRACT_ID=10000001

# ==============================
# グリッド設定（本番推奨値）
# ==============================
# Phase別自動調整:
# - Phase1 ($17-20): 2本 × $58.8幅 (0.06%)
# - Phase2 ($20-30): 3本 × $49幅 (0.05%)
# - Phase3 ($30+): 4本 × $39.2幅 (0.04%)

GRID_INTERVAL=100.0         # 基本グリッド幅（$）
GRID_COUNT=4                # 基本グリッド本数
ORDER_SIZE_USDT=10.0        # 1注文あたりの証拠金（$）
INITIAL_BALANCE=195.0       # 初期残高（$）
INVEST_USDT=195.0          # 投資額（$）

# 微益モード設定（Phase1専用）
GRID_INTERVAL_PERCENTAGE=0.0006   # 0.06%の価格幅
FORCE_MIN_ORDER=true              # 最小ロット強制配置

# ==============================
# Phase設定
# ==============================
GRID_COUNT_PHASE1=2         # Phase1: $17-20
GRID_COUNT_PHASE2=3         # Phase2: $20-30
PHASE2_THRESHOLD=20.0       # Phase2移行残高（$）
PHASE3_THRESHOLD=30.0       # Phase3移行残高（$）

# ==============================
# 安全機能
# ==============================
VOLATILITY_THRESHOLD=0.03           # 急落検知: 3%
VOLATILITY_CHECK_INTERVAL=30        # 監視間隔: 30秒
GRADUAL_DECLINE_THRESHOLD=0.01      # ジワ下落検知: 1%
GRADUAL_DECLINE_WINDOW=600          # ジワ下落観測期間: 10分
LOSS_LIMIT=0.50                     # 損失上限: 50%
MAX_NET_POSITION_BTC=0.01           # 最大ネットポジション: 0.01 BTC
POSITION_IMBALANCE_LIMIT=3          # ポジション偏り上限: 3本差

# ==============================
# 自動復帰設定
# ==============================
COOLDOWN_PERIOD_MINUTES=45              # クールダウン期間: 45分
MAX_COOLDOWN_MINUTES=75                 # 最大待機時間: 75分
STABILITY_CHECK_PERIOD_MINUTES=60       # 安定性確認期間: 60分
STABILITY_THRESHOLD=0.02                # 安定性閾値: 2%
MIN_RESUME_BALANCE=8.5                  # 最小復帰残高: $8.5
MAX_CONSECUTIVE_ERRORS=5                # 最大連続エラー数: 5回
FORCE_RESUME_AFTER_MAX=true             # 最大待機後の強制復帰

# ==============================
# 通知設定（オプション）
# ==============================
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# ==============================
# デバッグ設定
# ==============================
LOG_LEVEL=INFO              # DEBUG, INFO, WARNING, ERROR
TESTNET_MODE=false          # 本番環境

# ==============================
# Koyeb設定
# ==============================
PORT=8080                   # Koyeb Health Check用
WORKER_TYPE=standard        # Worker Type
REGION=fra                  # Frankfurt推奨（レイテンシ）

# ==============================
# EdgeX API仕様メモ（2026年1月）
# ==============================
# - API Version: V1 (V2は2026 Q1予定)
# - Rate Limit: 2 ops/2 sec（厳しい！）
# - 認証: StarkEx L2署名必須
# - contract_id: BTC-USDT = 10000001
# - coinId: USDT (文字列)
# - amount: 文字列で返却（float変換必須）
# - アクティブ注文: ポジションから推定
#   → get_active_orders(account_id, filter_contract_id_list)
# - 残高取得: get_account_asset(account_id)
#   → collateralList[].coinId == "USDT"
